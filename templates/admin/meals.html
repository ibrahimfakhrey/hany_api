{% extends "admin/base.html" %}

{% block title %}Ø§Ù„ÙˆØ¬Ø¨Ø§Øª{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ½ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</h1>
    <p class="breadcrumb">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… / Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</p>
</div>

{% if success_message %}
<div class="alert alert-success">
    {{ success_message }}
</div>
{% endif %}

{% if error_message %}
<div class="alert alert-error">
    {{ error_message }}
</div>
{% endif %}

<div class="stats-grid">
    <div class="stat-card total">
        <div class="icon">ğŸ½ï¸</div>
        <div class="number">{{ total }}</div>
        <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <span class="card-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</span>
        <a href="{{ url_for('admin.create_meal_page') }}" class="btn btn-primary">
            â• Ø¥Ø¶Ø§ÙØ© ÙˆØ¬Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
        </a>
    </div>

    {% if meals %}
    <div class="meals-grid">
        {% for meal in meals %}
        <div class="meal-card">
            {% if meal.image %}
            <img src="{{ meal.image }}" alt="{{ meal.title }}" class="meal-image">
            {% else %}
            <div class="meal-image-placeholder">ğŸ½ï¸</div>
            {% endif %}
            <div class="meal-content">
                <h3>{{ meal.title }}</h3>
                <span class="meal-category-badge category-{{ meal.category }}">
                    {% if meal.category == 'breakfast' %}ÙØ·ÙˆØ±
                    {% elif meal.category == 'lunch' %}ØºØ¯Ø§Ø¡
                    {% elif meal.category == 'dinner' %}Ø¹Ø´Ø§Ø¡
                    {% elif meal.category == 'snacks' %}Ø³Ù†Ø§ÙƒØ³
                    {% else %}{{ meal.category }}{% endif %}
                </span>
                {% if meal.description %}
                <p class="meal-description">{{ meal.description }}</p>
                {% endif %}
                {% if meal.link %}
                <a href="{{ meal.link }}" target="_blank" class="meal-link">
                    ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØµÙØ©
                </a>
                {% endif %}
                <div class="meal-date">ğŸ“… {{ meal.created_at[:10] }}</div>
            </div>
            <div class="meal-actions">
                <form action="{{ url_for('admin.delete_meal', meal_id=meal.id) }}" method="POST"
                      onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¬Ø¨Ø©ØŸ');">
                    <button type="submit" class="btn btn-danger btn-sm">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="icon">ğŸ½ï¸</div>
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¬Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
        <a href="{{ url_for('admin.create_meal_page') }}" class="btn btn-primary">Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ ÙˆØ¬Ø¨Ø©</a>
    </div>
    {% endif %}
</div>
{% endblock %}
